<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Impact Lab Registration</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&family=Playpen+Sans+Thai&display=swap" rel="stylesheet">

<style>

body{
margin:0;
padding:16px;
background:#F5EEDF;
font-family:"Playpen Sans Thai", system-ui;
}

.card{
max-width:900px;
margin:auto;
background:#fff;
padding:28px;
border-radius:18px;
box-shadow:0 12px 28px rgba(0,0,0,.18);
}

h1{
font-family:"Bagel Fat One";
margin:0;
font-size:34px;
}

label{
display:block;
margin-top:20px;
font-weight:700;
font-size:16px;
}

input, select{
width:100%;
padding:14px 16px;
border-radius:12px;
border:1px solid #ccc;
margin-top:8px;
font-family:"Playpen Sans Thai", system-ui;
font-size:15px;
box-sizing:border-box;
}

.qr-box{
margin:24px auto 6px;
max-width:320px;
padding:18px;
border-radius:18px;
border:2px solid #000;
text-align:center;
box-shadow:0 8px 20px rgba(0,0,0,.15);
}

.qr-box img{
width:100%;
border-radius:14px;
}

.btn{
margin-top:30px;
width:100%;
padding:18px;
background:#000;
color:#fff;
border:none;
border-radius:18px;
font-size:18px;
font-weight:700;
cursor:pointer;
font-family:"Playpen Sans Thai", system-ui;
}

.status{
margin-top:16px;
font-size:14px;
}

.error{
color:#b00020;
}


/* MOBILE PERFECT */

@media (max-width:600px){

body{
padding:10px;
}

.card{
padding:22px;
border-radius:16px;
}

h1{
font-size:28px;
}

input,select{
font-size:16px;
padding:16px;
}

.btn{
font-size:18px;
padding:18px;
}

.qr-box{
max-width:260px;
}

}

</style>
</head>

<body>

<div class="card">

<div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
<img src="./tfac.png" style="width:60px;height:60px;border-radius:50%">
<h1>Impact Lab Registration</h1>
</div>


<form id="form">

<label>Name</label>
<input name="name" required>

<label>Age</label>
<input name="age" inputmode="numeric" required>


<label>Participation Type</label>

<select name="participation" id="participation" required>

<option value="">Select</option>

<option value="individual">Individual</option>

<option value="team">Team</option>

</select>


<div id="teamSection" style="display:none;">

<label>Number of Team Members</label>
<input name="team_count" inputmode="numeric">


<label>Have all team members registered?</label>

<select name="registered">

<option value="">Select</option>

<option>Yes</option>

<option>No</option>

</select>


<label>Team Member Names (comma separated)</label>
<input name="team_names">

</div>


<label>Email</label>
<input name="email" type="email" required>


<label>Phone Number</label>
<input name="phone" inputmode="numeric" required>


<label>Scan QR to Pay</label>

<div class="qr-box">

<img src="./qr.png">

</div>


<button class="btn">

Submit Registration

</button>

<div id="status" class="status"></div>


</form>

</div>


<script type="module">

import { createClient } from "https://esm.sh/@supabase/supabase-js@2";


const supabase = createClient(

"https://xlqiicdqljbvwqgafacp.supabase.co",

"sb_publishable_U4BZXASjmXLOXS8Dts6fgg_UlAFfxZX"

);


const form = document.getElementById("form");

const participation = document.getElementById("participation");

const teamSection = document.getElementById("teamSection");

const statusEl = document.getElementById("status");


participation.addEventListener("change", () => {

if (participation.value === "team") {

teamSection.style.display = "block";

} else {

teamSection.style.display = "none";

}

});


form.addEventListener("submit", async (e) => {

e.preventDefault();


const { error } = await supabase.from("submissions").insert({

name: form.name.value.trim(),

age: Number(form.age.value),

participation_type: form.participation.value,

team_count: form.team_count.value ? Number(form.team_count.value) : null,

team_registered: form.registered.value || null,

team_names: form.team_names.value || null,

email: form.email.value.trim(),

phone: form.phone.value.trim()

});


if (error) {

statusEl.textContent = error.message;

statusEl.classList.add("error");

return;

}


window.location.href = "thankyou.html";

});


</script>

</body>
</html>
