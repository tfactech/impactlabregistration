<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8"/>
<title>Impact Lab Registration</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<link href="https://fonts.googleapis.com/css2?family=Bagel+Fat+One&family=Playpen+Sans+Thai&display=swap" rel="stylesheet">

<style>

body{
margin:0;
padding:16px;
background:#F5EEDF;
font-family:"Playpen Sans Thai", system-ui;
}

.card{
max-width:900px;
margin:auto;
background:white;
padding:28px;
border-radius:18px;
box-shadow:0 12px 28px rgba(0,0,0,.18);
}

h1{
font-family:"Bagel Fat One";
margin:0;
font-size:32px;
}

label{
display:block;
margin-top:20px;
font-weight:700;
}

input,select{
width:100%;
padding:14px;
margin-top:8px;
border-radius:12px;
border:1px solid #ccc;
font-size:16px;
box-sizing:border-box;
font-family:"Playpen Sans Thai";
}

.qr-box{
margin:24px auto;
max-width:300px;
padding:16px;
border-radius:16px;
border:2px solid black;
text-align:center;
}

.qr-box img{
width:100%;
border-radius:12px;
}

.btn{
margin-top:30px;
width:100%;
padding:18px;
background:black;
color:white;
border:none;
border-radius:18px;
font-size:18px;
font-weight:700;
cursor:pointer;
}

.status{
margin-top:14px;
font-size:14px;
color:#b00020;
}


/* MOBILE */

@media(max-width:600px){

h1{
font-size:26px;
}

.card{
padding:20px;
}

input,select{
padding:16px;
}

.qr-box{
max-width:240px;
}

}

</style>

</head>


<body>

<div class="card">

<div style="display:flex;align-items:center;gap:14px;flex-wrap:wrap;">

<img src="./tfac.png" style="width:60px;height:60px;border-radius:50%">

<h1>Impact Lab Registration</h1>

</div>



<form id="form">

<label>Name</label>
<input name="name" required>


<label>Age</label>
<input name="age" required>


<label>Participation Type</label>

<select name="participation" id="participation" required>

<option value="">Select</option>
<option value="individual">Individual</option>
<option value="team">Team</option>

</select>



<div id="teamSection" style="display:none;">

<label>Number of Team Members</label>
<input name="team_count">


<label>Have all team members registered?</label>

<select name="registered">

<option value="">Select</option>
<option>Yes</option>
<option>No</option>

</select>


<label>Team Member Names (comma separated)</label>
<input name="team_names">

</div>



<label>Email</label>
<input name="email" type="email" required>


<label>Phone Number</label>
<input name="phone" required>



<label>Scan QR to Pay</label>

<div class="qr-box">

<img src="./qr.png">

</div>



<button class="btn">

Submit Registration

</button>

<div id="status" class="status"></div>


</form>


</div>


<script type="module">

import { createClient }
from "https://esm.sh/@supabase/supabase-js@2";


const supabase=createClient(

"https://jwxqlzccxajkwrkawuxj.supabase.co",

"sb_publishable_SkOfvqVtreaiUIkOTTQxGA_FHZckoe5"

);


const form=document.getElementById("form");

const participation=document.getElementById("participation");

const teamSection=document.getElementById("teamSection");

const status=document.getElementById("status");



participation.addEventListener("change",()=>{

teamSection.style.display=
participation.value==="team"?"block":"none";

});



form.addEventListener("submit",async(e)=>{

e.preventDefault();

status.textContent="Submitting...";


try{

const {error}=await supabase
.from("submissions")
.insert([{

name:form.name.value,

age:Number(form.age.value),

participation_type:form.participation.value,

team_count:form.team_count.value||null,

team_registered:form.registered.value||null,

team_names:form.team_names.value||null,

email:form.email.value,

phone:form.phone.value

}]);


if(error){

status.textContent=error.message;

return;

}


window.location.href="./thankyou.html";


}catch(err){

status.textContent="Connection error";

console.log(err);

}

});


</script>


</body>

</html>

